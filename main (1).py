import telebot
from telebot import TeleBot
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton

token = '7715807749:AAGN9DavV4bBZskrnwGQx_7WMUIGZfeidRQ'
bot: TeleBot = telebot.TeleBot(token)

user_states = {}

@bot.message_handler(commands=['start'])
def start_command(message):
    user_states[message.chat.id] = 0  # –°–æ—Å—Ç–æ—è–Ω–∏–µ "0" –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    send_initial_message(message.chat.id)

def send_initial_message(chat_id):
    keyboard = InlineKeyboardMarkup()
    next_button = InlineKeyboardButton("–î–∞–ª–µ–µ", callback_data='next')
    keyboard.add(next_button)
    bot.send_message(chat_id,
                     "–û–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—Å—É–¥–∏—Ç—å –≤–∞–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–µ –≤—ã—Ö–æ–¥—è –∏–∑ –¥–æ–º–∞."
                     "–í—ã —Å–º–æ–∂–µ—Ç–µ: \n"
                     "üîπ–ø–æ–ª—É—á–∏—Ç—å –≥–∏–ø–æ—Ç–µ–∑—É –æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–º –¥–∏–∞–≥–Ω–æ–∑–µ; \n"
                     "üîπ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –≤—Ä–∞—á–æ–º; \n"
                     "üîπ—É–∑–Ω–∞—Ç—å –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –º–µ—Ç–æ–¥–∞—Ö –ª–µ—á–µ–Ω–∏—è –ø–æ –í–∞—à–µ–º—É –¥–∏–∞–≥–Ω–æ–∑—É; \n"
                     "üîπ—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫—Ç–∏–∫—É –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏; \n"
                     "üîπ–ø–æ–ª—É—á–∏—Ç—å –≤—Ç–æ—Ä–æ–µ –º–Ω–µ–Ω–∏–µ –æ –¥–∏–∞–≥–Ω–æ–∑–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –¥—Ä—É–≥–∏–º –≤—Ä–∞—á–æ–º; \n"
                     "üîπ–æ–±—Å—É–¥–∏—Ç—å –ª–µ—á–µ–Ω–∏–µ, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥—Ä—É–≥–∏–º –≤—Ä–∞—á–æ–º; \n"
                     "üîπ–ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –æ–± –∏–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö –≤ —Ä–∞–º–∫–∞—Ö –Ω–µ–≤—Ä–æ–ª–æ–≥–∏–∏.\n",
                     reply_markup=keyboard)

@bot.callback_query_handler(func=lambda call: True)
def callback_query(call):
    chat_id = call.message.chat.id
    user_state = user_states.get(chat_id, 0)  # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    if user_state == 0:
        next_button = InlineKeyboardButton("–î–∞–ª–µ–µ", callback_data='next')
        keyboard = InlineKeyboardMarkup().add(next_button)
        bot.send_message(chat_id,
                         "–í —Ä–∞–º–∫–∞—Ö –¥–µ–π—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (—Å—Ç–∞—Ç—å—è 36.2 —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–∞ N¬∞ 323) –Ω–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è—Ö –∑–∞–ø—Ä–µ—â–µ–Ω–æ:\n"
                         "‚õîÔ∏è—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑;\n"
                         "‚õîÔ∏è–Ω–∞–∑–Ω–∞—á–∞—Ç—å –ª–µ—á–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤, –∏—Ö –¥–æ–∑–∏—Ä–æ–≤–∫–∏ –∏ –∫—Ä–∞—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏–µ–º–∞;\n"
                         "‚õîÔ∏è–≤—ã–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç –Ω–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç.\n\n"
                         "–û–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è ‚Äì —ç—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è, –∞ –Ω–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —É—Å–ª—É–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –æ—á–Ω—ã–π –ø—Ä–∏–µ–º.",
                         reply_markup=keyboard)
        user_states[chat_id] = 1

    elif user_state == 1:
        next_button = InlineKeyboardButton("–î–∞–ª–µ–µ", callback_data='next')
        keyboard = InlineKeyboardMarkup().add(next_button)
        bot.send_message(chat_id,
                         "–ö–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è?\n"
                         "üë©üèª‚Äç‚öïÔ∏è–§–æ—Ä–º–∞—Ç –í—ã –≤—ã–±–µ—Ä–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ ‚Äî –∞—É–¥–∏–æ-–∑–≤–æ–Ω–æ–∫/–≤–∏–¥–µ–æ-–∑–≤–æ–Ω–æ–∫/—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è/–≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.\n"
                         "üë©üèª‚Äç‚öïÔ∏è–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ 30 –º–∏–Ω—É—Ç.\n"
                         "üë©üèª‚Äç‚öïÔ∏è–í—Ä–µ–º—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç—Å—è –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ —Å –≤—Ä–∞—á–æ–º.",
                         reply_markup=keyboard)
        user_states[chat_id] = 2

    elif user_state == 2:
        next_button = InlineKeyboardButton("–î–∞–ª–µ–µ", callback_data='next')
        keyboard = InlineKeyboardMarkup().add(next_button)
        bot.send_message(chat_id,
                         "–°—Ç–æ–∏–º–æ—Å—Ç—å:\n"
                         "üí≤–ü–µ—Ä–≤–∏—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è 2000‚ÇΩ;\n"
                         "üí≤–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è (–Ω–µ –±–æ–ª–µ–µ —Ç—Ä–µ—Ö –º–µ—Å—è—Ü–µ–≤ —Å –¥–∞—Ç—ã –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø–µ—Ä–≤–∏—á–Ω–æ–π) 1500‚ÇΩ.",
                         reply_markup=keyboard)
        user_states[chat_id] = 3

    elif user_state == 3:
        keyboard = InlineKeyboardMarkup()
        button1 = InlineKeyboardButton("–î–æ–≥–æ–≤–æ—Ä-–æ—Ñ–µ—Ä—Ç–∞ –Ω–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π",
                                       url='https://disk.yandex.ru/i/HsiBX7bGcs927A')
        button2 = InlineKeyboardButton("–ü–æ–ª–∏—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö",
                                       url='https://disk.yandex.ru/i/IT7jNVfOgIwBaA')
        button3 = InlineKeyboardButton("–° –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω(–∞)",
                                       callback_data='agree_to_terms')
        user_states[chat_id] = 4

        keyboard.add(button1)
        keyboard.add(button2)
        keyboard.add(button3)

        bot.send_message(chat_id, "–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏:", reply_markup=keyboard)

    elif call.data == 'agree_to_terms':
        user_states[chat_id] = 4  # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
        keyboard = InlineKeyboardMarkup()
        pay_button = InlineKeyboardButton("–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ", callback_data='pay_consultation')
        keyboard.add(pay_button)

        bot.send_message(chat_id,
                         "–í–∞—à–µ –æ–±—â–µ–Ω–∏–µ —Å –¥–æ–∫—Ç–æ—Ä–æ–º –Ω–µ –±—É–¥–µ—Ç —è–≤–ª—è—Ç—å—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π —É—Å–ª—É–≥–æ–π. –î–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–æ—á–Ω–æ–≥–æ –¥–∏–∞–≥–Ω–æ–∑–∞ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ª–µ—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ—á–Ω—ã–π –ø—Ä–∏–µ–º. –ù–∞–∂–∏–º–∞—è ¬´–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ¬ª –í—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –≤—Å–µ —É—Å–ª–æ–≤–∏—è –∏ –±–µ—Ä–µ—Ç–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ —Å–µ–±—è.",
                         reply_markup=keyboard)

    elif call.data == 'pay_consultation':
        user_states[chat_id] = 5  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
        additional_numbers_message = "–û–ø–ª–∞—Ç–∏—Ç—å –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é: 5536 9138 5057 9539\n\n–ü–æ—Å–ª–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã, –Ω–∞–∂–º–∏—Ç–µ \"–î–∞–ª–µ–µ\"."
        next_button = InlineKeyboardButton("–î–∞–ª–µ–µ", callback_data='after_payment')
        keyboard = InlineKeyboardMarkup().add(next_button)
        bot.send_message(chat_id, additional_numbers_message, reply_markup=keyboard)

    elif call.data == 'after_payment':
        # –õ–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–î–∞–ª–µ–µ" –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
        bot.send_message(chat_id, "–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ –∫ –≤—Ä–∞—á—É-–Ω–µ–≤—Ä–æ–ª–æ–≥—É –ì–æ—Ä–±–∞—á–µ–≤–æ–π –ê–Ω–Ω–µ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–µ.\n\n"
                                  "–ú—ã –æ—á–µ–Ω—å —Å—Ç–∞—Ä–∞–ª–∏—Å—å, —á—Ç–æ–±—ã –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø–∏—Å–∏ –±—ã–ª –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–º –∏ –ø—Ä–æ—Å—Ç—ã–º –¥–ª—è –í–∞—Åü´∂üèª\n"
                                  "–ù–∏–∂–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Å–≤—è–∑–∏ —Å –ê–Ω–Ω–æ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–æ–πüë©üèª‚Äç‚öïÔ∏è\n\n\n"
                                  "–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å —á–∞—Ç –≤ –ª—é–±–æ–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –≤ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –í–∞—Å –≤—Ä–µ–º—è.\n\n"
                                  "–í —Ç–µ—á–µ–Ω–∏–µ 24-—Ö —á–∞—Å–æ–≤ –ê–Ω–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞ –æ—Ç–≤–µ—Ç–∏—Ç –í–∞–º, –≤—ã –≤–º–µ—Å—Ç–µ –ø–æ–¥–±–µ—Ä–µ—Ç–µ —É–¥–æ–±–Ω—ã–µ –≤—Ä–µ–º—è –∏ —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.\n\n"
                                  "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–±—â–µ–Ω–∏—è —Å –ê–Ω–Ω–æ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–æ–π –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–π –í –õ–ò–ß–ù–´–ô –ß–ê–¢ —Å–ª–µ–¥—É—é—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è:\n"
                                  "1Ô∏è‚É£ –ö–≤–∏—Ç–∞–Ω—Ü–∏—é –æ–± –æ–ø–ª–∞—Ç–µ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.\n"
                                  "2Ô∏è‚É£ –ó–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –í—ã –±—ã —Ö–æ—Ç–µ–ª–∏ –æ–±—Å—É–¥–∏—Ç—å —Å –¥–æ–∫—Ç–æ—Ä–æ–º.\n"
                                  "3Ô∏è‚É£ –§–æ—Ç–æ –∏–º–µ—é—â–∏—Ö—Å—è –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, –≤—ã–ø–∏—Å–æ–∫, –∏–Ω—ã—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π, –æ—Ç–Ω–æ—Å—è—â–∏—Ö—Å—è –∫ –í–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É.\n"
                                  "4Ô∏è‚É£ –°–ø–∏—Å–æ–∫ –∏–º–µ—é—â–∏—Ö—Å—è —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤, –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã—Ö –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ—Å–Ω–æ–≤–µ.")
        button5 = InlineKeyboardButton("–õ–∏—á–Ω—ã–π —á–∞—Ç —Å –¥–æ–∫—Ç–æ—Ä–æ–º", url='https://t.me/vpsanna')
        chat_keyboard = InlineKeyboardMarkup().add(button5)
        bot.send_message(chat_id, "–ù–∞—á–∞—Ç—å —á–∞—Ç:", reply_markup=chat_keyboard)

if __name__ == "__main__":
    bot.polling(none_stop=True, interval=0)